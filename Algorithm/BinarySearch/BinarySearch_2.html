<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>二分查找-模板二 | WaterFly</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Just Coding">
    
    <link rel="preload" href="/assets/css/0.styles.84748982.css" as="style"><link rel="preload" href="/assets/js/app.3efcfa1f.js" as="script"><link rel="preload" href="/assets/js/3.d41f5393.js" as="script"><link rel="preload" href="/assets/js/1.0d0e82e9.js" as="script"><link rel="preload" href="/assets/js/8.c5d718a6.js" as="script"><link rel="prefetch" href="/assets/js/10.6a591f7b.js"><link rel="prefetch" href="/assets/js/11.2da2c136.js"><link rel="prefetch" href="/assets/js/12.597e1e9e.js"><link rel="prefetch" href="/assets/js/13.bfe6e49a.js"><link rel="prefetch" href="/assets/js/14.d5101ebe.js"><link rel="prefetch" href="/assets/js/15.d075eb78.js"><link rel="prefetch" href="/assets/js/16.1de846ec.js"><link rel="prefetch" href="/assets/js/17.73e1206f.js"><link rel="prefetch" href="/assets/js/18.3563029d.js"><link rel="prefetch" href="/assets/js/19.018202b6.js"><link rel="prefetch" href="/assets/js/20.92e231d8.js"><link rel="prefetch" href="/assets/js/21.a26b4bf6.js"><link rel="prefetch" href="/assets/js/22.a240a942.js"><link rel="prefetch" href="/assets/js/23.5d73353d.js"><link rel="prefetch" href="/assets/js/24.1a101222.js"><link rel="prefetch" href="/assets/js/25.f7c05ac5.js"><link rel="prefetch" href="/assets/js/26.cf0f99d3.js"><link rel="prefetch" href="/assets/js/27.4412c990.js"><link rel="prefetch" href="/assets/js/28.a9e9a7e1.js"><link rel="prefetch" href="/assets/js/29.9b39ea41.js"><link rel="prefetch" href="/assets/js/30.19dafc01.js"><link rel="prefetch" href="/assets/js/31.9d2c45f0.js"><link rel="prefetch" href="/assets/js/32.f7aa758f.js"><link rel="prefetch" href="/assets/js/33.54518586.js"><link rel="prefetch" href="/assets/js/34.71ab4ffb.js"><link rel="prefetch" href="/assets/js/35.5442dc08.js"><link rel="prefetch" href="/assets/js/36.3d80fb49.js"><link rel="prefetch" href="/assets/js/37.d767afa3.js"><link rel="prefetch" href="/assets/js/38.15d6331f.js"><link rel="prefetch" href="/assets/js/39.a6c25426.js"><link rel="prefetch" href="/assets/js/4.d08f1479.js"><link rel="prefetch" href="/assets/js/40.87d678b9.js"><link rel="prefetch" href="/assets/js/41.edd890b5.js"><link rel="prefetch" href="/assets/js/42.d6677079.js"><link rel="prefetch" href="/assets/js/43.ff4d75ff.js"><link rel="prefetch" href="/assets/js/44.32c7a951.js"><link rel="prefetch" href="/assets/js/45.2c851721.js"><link rel="prefetch" href="/assets/js/46.9bbe5a11.js"><link rel="prefetch" href="/assets/js/47.0e2c36cc.js"><link rel="prefetch" href="/assets/js/48.09bc8442.js"><link rel="prefetch" href="/assets/js/49.52342b74.js"><link rel="prefetch" href="/assets/js/5.9634f48e.js"><link rel="prefetch" href="/assets/js/50.c9e3c4c5.js"><link rel="prefetch" href="/assets/js/51.28a51db9.js"><link rel="prefetch" href="/assets/js/52.58832236.js"><link rel="prefetch" href="/assets/js/53.86af7b76.js"><link rel="prefetch" href="/assets/js/54.973c15bf.js"><link rel="prefetch" href="/assets/js/55.d4a03e12.js"><link rel="prefetch" href="/assets/js/56.ac7e97e0.js"><link rel="prefetch" href="/assets/js/57.7fa14d11.js"><link rel="prefetch" href="/assets/js/58.b0f390b8.js"><link rel="prefetch" href="/assets/js/59.62b96874.js"><link rel="prefetch" href="/assets/js/6.4c543392.js"><link rel="prefetch" href="/assets/js/60.0c40514a.js"><link rel="prefetch" href="/assets/js/61.65259e68.js"><link rel="prefetch" href="/assets/js/62.9fb64114.js"><link rel="prefetch" href="/assets/js/63.3975ffd5.js"><link rel="prefetch" href="/assets/js/64.911d2812.js"><link rel="prefetch" href="/assets/js/65.ce9ab40b.js"><link rel="prefetch" href="/assets/js/66.b89de3df.js"><link rel="prefetch" href="/assets/js/67.4169b86c.js"><link rel="prefetch" href="/assets/js/68.a812ad4b.js"><link rel="prefetch" href="/assets/js/69.b0c76c03.js"><link rel="prefetch" href="/assets/js/7.2aba56aa.js"><link rel="prefetch" href="/assets/js/70.9749f302.js"><link rel="prefetch" href="/assets/js/71.0d38010b.js"><link rel="prefetch" href="/assets/js/72.a6338004.js"><link rel="prefetch" href="/assets/js/73.c1001eb8.js"><link rel="prefetch" href="/assets/js/74.0069037e.js"><link rel="prefetch" href="/assets/js/75.c4591a8d.js"><link rel="prefetch" href="/assets/js/76.e1a3f216.js"><link rel="prefetch" href="/assets/js/77.df0b0aac.js"><link rel="prefetch" href="/assets/js/78.2f535a98.js"><link rel="prefetch" href="/assets/js/79.60e4b9f5.js"><link rel="prefetch" href="/assets/js/80.50af71ac.js"><link rel="prefetch" href="/assets/js/81.7d753c90.js"><link rel="prefetch" href="/assets/js/82.5703b0fa.js"><link rel="prefetch" href="/assets/js/83.4af8ebaa.js"><link rel="prefetch" href="/assets/js/84.ed963d52.js"><link rel="prefetch" href="/assets/js/85.7cb175ff.js"><link rel="prefetch" href="/assets/js/86.bd0d1f92.js"><link rel="prefetch" href="/assets/js/87.f00e8426.js"><link rel="prefetch" href="/assets/js/88.a34c0493.js"><link rel="prefetch" href="/assets/js/89.564cb64c.js"><link rel="prefetch" href="/assets/js/9.25143fa3.js"><link rel="prefetch" href="/assets/js/90.ce031d67.js"><link rel="prefetch" href="/assets/js/91.2a75f163.js"><link rel="prefetch" href="/assets/js/92.a2591da3.js"><link rel="prefetch" href="/assets/js/93.6af4f4b0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.84748982.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-349e681a><div data-v-349e681a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-b3e6ef50 data-v-349e681a data-v-349e681a><h3 class="title" data-v-b3e6ef50>WaterFly</h3> <p class="description" data-v-b3e6ef50>Just Coding</p> <label id="box" class="inputBox" data-v-b3e6ef50><input type="password" value="" data-v-b3e6ef50> <span data-v-b3e6ef50>Konck! Knock!</span> <button data-v-b3e6ef50>OK</button></label> <div class="footer" data-v-b3e6ef50><span data-v-b3e6ef50><i class="iconfont reco-theme" data-v-b3e6ef50></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-b3e6ef50>vuePress-theme-reco</a></span> <span data-v-b3e6ef50><i class="iconfont reco-copyright" data-v-b3e6ef50></i> <a data-v-b3e6ef50><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-349e681a><header class="navbar" data-v-349e681a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">WaterFly</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/Algorithm/" class="nav-link router-link-active"><i class="undefined"></i>
  算法
</a></div><div class="nav-item"><a href="/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      iOS
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/Swift/" class="nav-link"><i class="undefined"></i>
  Swift
</a></li><li class="dropdown-item"><!----> <a href="/iOS/RN/" class="nav-link"><i class="undefined"></i>
  RN
</a></li><li class="dropdown-item"><!----> <a href="/iOS/OC/" class="nav-link"><i class="undefined"></i>
  OC
</a></li></ul></div></div><div class="nav-item"><a href="/Other/" class="nav-link"><i class="undefined"></i>
  Other
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="https://github.com/waterfly" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-349e681a></div> <aside class="sidebar" data-v-349e681a><div class="personal-info-wrapper" data-v-1bfe3fa5 data-v-349e681a><img src="/bike.png" alt="author-avatar" class="personal-img" data-v-1bfe3fa5> <!----> <div class="num" data-v-1bfe3fa5><div data-v-1bfe3fa5><h3 data-v-1bfe3fa5>83</h3> <h6 data-v-1bfe3fa5>Articles</h6></div> <div data-v-1bfe3fa5><h3 data-v-1bfe3fa5>34</h3> <h6 data-v-1bfe3fa5>Tags</h6></div></div> <ul class="social-links" data-v-1bfe3fa5></ul> <hr data-v-1bfe3fa5></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/Algorithm/" class="nav-link router-link-active"><i class="undefined"></i>
  算法
</a></div><div class="nav-item"><a href="/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      iOS
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/Swift/" class="nav-link"><i class="undefined"></i>
  Swift
</a></li><li class="dropdown-item"><!----> <a href="/iOS/RN/" class="nav-link"><i class="undefined"></i>
  RN
</a></li><li class="dropdown-item"><!----> <a href="/iOS/OC/" class="nav-link"><i class="undefined"></i>
  OC
</a></li></ul></div></div><div class="nav-item"><a href="/Other/" class="nav-link"><i class="undefined"></i>
  Other
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="https://github.com/waterfly" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><a href="/Algorithm/" aria-current="page" class="sidebar-link">算法专题总结</a></li><li><a href="/Algorithm/Pattern.html" class="sidebar-link">模式识别</a></li><li><a href="/Algorithm/CodeSnippet.html" class="sidebar-link">CodeSnippet</a></li><li><a href="/Algorithm/LinkedList/LinkedList.html" class="sidebar-link">链表</a></li><li><a href="/Algorithm/BST.html" class="sidebar-link">二叉搜索树</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>二分查找</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Algorithm/BinarySearch/BinarySearch.html" class="sidebar-link">二分查找</a></li><li><a href="/Algorithm/BinarySearch/BinarySearch_1.html" class="sidebar-link">二分查找-模板一</a></li><li><a href="/Algorithm/BinarySearch/BinarySearch_2.html" aria-current="page" class="active sidebar-link">二分查找-模板二</a></li><li><a href="/Algorithm/BinarySearch/BinarySearch_3.html" class="sidebar-link">二分查找-模板三</a></li><li><a href="/Algorithm/BinarySearch/BinarySearch_summary.html" class="sidebar-link">二分查找-总结</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>双指针</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-b3e6ef50 data-v-349e681a><h3 class="title" data-v-b3e6ef50>二分查找-模板二</h3> <!----> <label id="box" class="inputBox" data-v-b3e6ef50><input type="password" value="" data-v-b3e6ef50> <span data-v-b3e6ef50>Konck! Knock!</span> <button data-v-b3e6ef50>OK</button></label> <div class="footer" data-v-b3e6ef50><span data-v-b3e6ef50><i class="iconfont reco-theme" data-v-b3e6ef50></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-b3e6ef50>vuePress-theme-reco</a></span> <span data-v-b3e6ef50><i class="iconfont reco-copyright" data-v-b3e6ef50></i> <a data-v-b3e6ef50><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-349e681a><div data-v-349e681a><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">二分查找-模板二</h1> <div data-v-0b291498><!----> <i class="iconfont reco-date" data-v-0b291498><span data-v-0b291498>9/9/2022</span></i> <!----> <i class="tags iconfont reco-tag" data-v-0b291498><span class="tag-item" data-v-0b291498>二分查找</span></i></div></div> <div class="theme-reco-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#模板二">模板二</a></li><li><a href="#模板代码">模板代码</a><ul><li><a href="#代码">代码</a></li><li><a href="#区分语法">区分语法</a></li></ul></li><li><a href="#例题">例题</a><ul><li><a href="#lc-278-第一个错误的版本-https-leetcode-cn-problems-first-bad-version">LC 278. 第一个错误的版本</a></li><li><a href="#lc-162-寻找峰值-https-leetcode-cn-problems-find-peak-element">LC 162. 寻找峰值</a></li><li><a href="#lc-153-寻找旋转排序数组中的最小值-https-leetcode-cn-problems-find-minimum-in-rotated-sorted-array">LC 153. 寻找旋转排序数组中的最小值</a></li><li><a href="#lc-34-在排序数组中查找元素的第一个和最后一个位置-https-leetcode-cn-problems-find-first-and-last-position-of-element-in-sorted-array">LC 34. 在排序数组中查找元素的第一个和最后一个位置</a></li><li><a href="#lc-658-找到-k-个最接近的元素-https-leetcode-cn-problems-find-k-closest-elements">LC 658. 找到 K 个最接近的元素</a></li></ul></li><li><a href="#小结">小结</a></li></ul></div><p></p> <h2 id="模板二"><a href="#模板二" class="header-anchor">#</a> 模板二</h2> <p>模板二应用范围更广，应用于夹逼寻找满足条件的一个值，比如在一个有序数组中，寻找一个满足某条件（比如大于数组中的某一个值）的值，或在一个无重复数的数组中寻找到一个峰值（可能有多个峰值）。</p> <p>适合解决区间内符合条件的某个值，而不是求解特定值，即使用夹逼法一步步缩小区间，最终缩小到一个点，就是答案（对于题目有确定答案的情况，如果不一定有答案则需要最后对该点进行判断）</p> <p>示例：</p> <p><img src="/assets/img/t_2_34.93557221.jpg" alt=""></p> <p>在一个如上图所示的非递减区间内，其中A点与B点数值相同，<strong>通过模板二夹逼法可以找到A点和C点，但是找不到B点</strong>，具体可以见<code>LC 34题</code>分析。</p> <h2 id="模板代码"><a href="#模板代码" class="header-anchor">#</a> 模板代码</h2> <h3 id="代码"><a href="#代码" class="header-anchor">#</a> 代码</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 官方模板，但这个模板并不常用，模板二的强大之处在于夹逼寻找结果</span>
<span class="token keyword">function</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token comment">// 左闭右开区间 [left, right)</span>
  <span class="token comment">// while循环内会少一次 left = right情况，需要在while循环后判断</span>
  <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Prevent (left + right) overflow</span>
    <span class="token comment">// let mid = left + parseInt((right - left) / 2);</span>
    <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token keyword">return</span> mid<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 注意这里，保持 [left ,rigt) 左开右闭区间</span>
      right <span class="token operator">=</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 循环结束条件 left == right，此时如果 left没有遍历到 nums.length，则需要判断 nums[left] ==  target的情况</span>
  <span class="token comment">// Post-processing:</span>
  <span class="token comment">// End Condition: left == right</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">!=</span> nums<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token keyword">return</span> left<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 夹逼模板，模板二代码更常用该模板</span>
<span class="token keyword">function</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 循环直至区间左右端点相同</span>
    <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 防止计算时溢出</span>
    <span class="token comment">// nums[mid] 与某个值比较得出结果，比如调用外部函数、与nums[mid+1]、nums[right]等比较</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compare</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      right <span class="token operator">=</span> mid<span class="token punctuation">;</span> <span class="token comment">// mid可能为答案，需要留在答案区间，答案区间为 [left, mid]</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// mid 肯定不是答案，需要从答案区间移除，移除后答案区间为 [mid+1, right]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 此时有 left == right，区间缩为一个点，如果题目确定有一个答案，此区间点即为答案；如果没有一个确定的答案，需要判断</span>
  <span class="token keyword">return</span> left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="区分语法"><a href="#区分语法" class="header-anchor">#</a> 区分语法</h3> <ul><li>初始条件：left = 0, right = length-1（并不是绝对，根据题目变化）</li> <li>循环判断条件：<strong>left &lt; right</strong>，这是核心，不断缩小区间，最后的那个点可能是答案</li> <li>终止：left == right，如果题目确定有一个答案，left就是答案</li> <li>向左查找：<strong>right = mid</strong>，<strong>此时mid可能是答案，需要留在答案区间</strong></li> <li>向右查找：<strong>left = mid+1</strong>，<strong>此时mid确定不是答案，需要从答案区间移除</strong></li></ul> <p><strong>注意：这里不可能是 <code>left = mid; right = mid-1;</code>，由于mid为向下去中，考虑[0,1]区间，mid = 0，如果此时 nums[mid] &lt; target，mid会一直停留在left。即对于两个数的区间，mid == left，此时如果left不变化，则会陷入无限循环中。</strong></p> <h2 id="例题"><a href="#例题" class="header-anchor">#</a> 例题</h2> <h3 id="lc-278-第一个错误的版本"><a href="#lc-278-第一个错误的版本" class="header-anchor">#</a> <a href="https://leetcode.cn/problems/first-bad-version/" target="_blank" rel="noopener noreferrer">LC 278. 第一个错误的版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Q：</p> <blockquote><p>你是产品经理，目前正在带领一个团队开发新的产品。不幸的是，你的产品的最新版本没有通过质量检测。由于每个版本都是基于之前的版本开发的，所以错误的版本之后的所有版本都是错的。</p> <p>假设你有 n 个版本 [1, 2, ..., n]，你想找出导致之后所有版本出错的第一个错误的版本。</p> <p>你可以通过调用 bool isBadVersion(version) 接口来判断版本号 version 是否在单元测试中出错。实现一个函数来查找第一个错误的版本。你应该尽量减少对调用 API 的次数。</p> <p>来源：力扣（LeetCode）
链接：https://leetcode.cn/problems/first-bad-version
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p></blockquote> <p>A：本题目是经典的模板二应用场景。题目一定有一个错误版本的答案，因此可用模板二夹逼去寻找答案。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * Definition for isBadVersion()
 * 
 * @param {integer} version number
 * @return {boolean} whether the version is bad
 * isBadVersion = function(version) {
 *     ...
 * };
 */</span>

<span class="token comment">/**
 * @param {function} isBadVersion()
 * @return {function}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">solution</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">isBadVersion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * @param {integer} n Total versions
     * @return {integer} The first bad version
     */</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> right <span class="token operator">=</span> n<span class="token punctuation">;</span>
      	<span class="token comment">// 肯定有一个正确答案，答案区间从 [left, right] 缩小为一个点 [left, left] 时，left 即为答案</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isBadVersion</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              	<span class="token comment">// mid 可能是答案，需要留在答案区间内</span>
                right <span class="token operator">=</span> mid<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              	<span class="token comment">// mid 可以确定不是正确的答案，需要排除在答案区间外</span>
                left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> left<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>用一个例子来理解，如下图所示，共有6个版本，从第4个版本开始为错误的版本，现在就要通过二分法寻找出第4个版本。</p> <img src="/assets/img/t_2_278.7daff412.jpg" style="zoom:50%;"> <ul><li>第一步，mid = (1 + 6) / 2 = 3，第3个版本为正确的版本，即 mid = 3 <strong>肯定不是答案，因此 left = mid + 1</strong>，将 mid 排除答案区间，此时可能的答案区间为 [mid + 1, right]，即 [4, 6]</li> <li>第二步，mid = (4 + 6 ) / 2 = 5，第5个版本为错误的版本，即 mid = 5 <strong>可能是答案，因此 right = mid</strong>，需要将mid留在答案区间，此时答案区间为 [left, mid]，即 [4, 5]。（注意，为什么说 mid = 5 可能是答案，因为 区间还有两个数，left 此时等于4，还没有验证过，不能将left排除，从图中也可以很明显的看出，mid = 5 不是正确答案）</li> <li>第三步，mid = (4 + 5) / 2 = 4，第4个版本为错误的版本，即 mid = 4 可能是正确的答案，因此 right = mid = 4，需要将 mid 留在答案区间，此时答案区间为 [left, mid]，即  [4, 4]</li> <li>第四补，此时答案区间为一个点，不满足 left &lt; right 条件，因此这个点即为正确答案</li></ul> <p>综上可以发现，模板二是通过一步步缩小答案区间，夹逼寻找答案。需要注意的是：</p> <ol><li>为什么 <code>left = mid + 1</code> ？因为此时 <strong>可以确定 mid 不是答案，需要将 mid 移除答案区间</strong></li> <li>为什么 <code>right = mid</code>？因为此时 <strong>mid可能是答案，需要留在答案区间</strong></li></ol> <h3 id="lc-162-寻找峰值"><a href="#lc-162-寻找峰值" class="header-anchor">#</a> <a href="https://leetcode.cn/problems/find-peak-element/" target="_blank" rel="noopener noreferrer">LC 162. 寻找峰值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Q：</p> <blockquote><p>峰值元素是指其值严格大于左右相邻值的元素。</p> <p>给你一个整数数组 nums，找到峰值元素并返回其索引。数组可能包含多个峰值，在这种情况下，返回 任何一个峰值 所在位置即可。</p> <p>你可以假设 nums[-1] = nums[n] = -∞ 。</p> <p>你必须实现时间复杂度为 O(log n) 的算法来解决此问题。</p> <p>来源：力扣（LeetCode）
链接：https://leetcode.cn/problems/find-peak-element
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p></blockquote> <p>A：由于 <code>nums[-1] = nums[n] = -∞</code>，题目一定会有一个正确答案。采用<strong>爬坡法</strong>，即通过比较 mid 与 mid +1的值，一步步爬坡，最终找到一个坡顶元素就是答案</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {number[]} nums
 * @return {number}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">findPeakElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
      	<span class="token comment">// 爬坡法，通过比较 mid 与 mid+1 的值，一步步爬坡，最终爬到坡顶</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          	<span class="token comment">// 此时可以确定，mid 一定不是坡顶，因此把 mid 从答案区间排除</span>
            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          	<span class="token comment">// 此时 mid 可能是答案，需要把 mid 留在答案区间</span>
            right <span class="token operator">=</span> mid<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  	
  	<span class="token comment">// 任意一个坡顶即为答案，元素区间缩小至 [left, left]，</span>
    <span class="token keyword">return</span> left<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="lc-153-寻找旋转排序数组中的最小值"><a href="#lc-153-寻找旋转排序数组中的最小值" class="header-anchor">#</a> <a href="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/" target="_blank" rel="noopener noreferrer">LC 153. 寻找旋转排序数组中的最小值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Q：</p> <blockquote><p>已知一个长度为 n 的数组，预先按照升序排列，经由 1 到 n 次 旋转 后，得到输入数组。例如，原数组 nums = [0,1,2,4,5,6,7] 在变化后可能得到：
若旋转 4 次，则可以得到 [4,5,6,7,0,1,2]
若旋转 7 次，则可以得到 [0,1,2,4,5,6,7]
注意，数组 [a[0], a[1], a[2], ..., a[n-1]] 旋转一次 的结果为数组 [a[n-1], a[0], a[1], a[2], ..., a[n-2]] 。</p> <p>给你一个元素值 互不相同 的数组 nums ，它原来是一个升序排列的数组，并按上述情形进行了多次旋转。请你找出并返回数组中的 最小元素 。</p> <p>你必须设计一个时间复杂度为 O(log n) 的算法解决此问题。</p> <p>来源：力扣（LeetCode）
链接：https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p></blockquote> <p>A：这题与<code>33. 搜索旋转排序数组</code>有点像，都为旋转排序数组，但本题求最小值，并不是明确的某个值的索引。先画出折线图，当mid在左或者右时，nums[left] 始终小于等于nums[mid]，没有变化；但是mid在左时，nums[mid] &gt; nums[right]；当mid在右时 nums[mid] &lt;= num[right]，由此产生了二段性。使用二分法模板二进行夹逼求值。</p> <img src="/assets/img/t_2_153.284fe561.jpg" style="zoom:50%;"> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {number[]} nums
 * @return {number}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">findMin</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
      	<span class="token comment">// 这里使用 &lt; 或 &lt;= 都可以</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          	<span class="token comment">// mid 线在左边时，此时最小值一定在左侧</span>
          	<span class="token comment">// 此时 mid 可能为答案，答案区间往左收敛，mid留在答案区间内</span>
            right <span class="token operator">=</span> mid<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          	<span class="token comment">// mid 线在右边时，此时最小值一定在右侧</span>
          	<span class="token comment">// 此时mid 肯定不是答案，答案区间往右收敛，将mid移除答案区间</span>
            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="lc-34-在排序数组中查找元素的第一个和最后一个位置"><a href="#lc-34-在排序数组中查找元素的第一个和最后一个位置" class="header-anchor">#</a> <a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noopener noreferrer">LC 34. 在排序数组中查找元素的第一个和最后一个位置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Q：</p> <blockquote><p>给你一个按照非递减顺序排列的整数数组 nums，和一个目标值 target。请你找出给定目标值在数组中的开始位置和结束位置。</p> <p>如果数组中不存在目标值 target，返回 [-1, -1]。</p> <p>你必须设计并实现时间复杂度为 O(log n) 的算法解决此问题。</p> <p>来源：力扣（LeetCode）
链接：https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p></blockquote> <p>A：这一题虽然在力扣专题里放到了模板三，但其实用模板二更合适。先画一个折线图，用一个折线图来理解，这个折线图会更容易理解模板二的原理，即通过夹逼法使区间缩小到一个点，然后对该点判断是否是答案。</p> <p><img src="/assets/img/t_2_34.93557221.jpg" alt=""></p> <p>对于上图中的非递减数组，寻找A点和B点。使用模板二夹逼寻找可以找到A点和C点，但是找不到B点。</p> <p>寻找A点：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token comment">// 非递减数组nums, 寻找target，寻找A点</span>
<span class="token punctuation">{</span>
      <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
        	<span class="token comment">// 区间不断缩小，如果 target存在，当区间缩小到一个点时 [left, left]，则 left 点一定是A点，这块可以用图中示例来一步步计算下方便理解</span>
        	<span class="token comment">// 注意，这里是用的 &lt; ，即 left 一步步逼近A点</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            	<span class="token comment">// 此时mid点一定不是 target，因此把 mid 从可能的答案区间中移除，移除后的答案区间为 [mid+1, right]</span>
              left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token comment">//  &gt;= target</span>
              right <span class="token operator">=</span> mid<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  
  		<span class="token comment">// 由于不一定存在target，因此需要对A点判断</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          start <span class="token operator">=</span> left<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
</code></pre></div><p>寻找C点：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 非递减数组nums, 寻找target，寻找C点</span>
<span class="token punctuation">{</span>
      <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
        	
        	<span class="token comment">// 注意这里，使用的是 &lt;= ，则最终当区间缩小为一个点时， left 一定不是target (最后一位元素是target的情况除外，因此需要对这种情况做判断)，即 由于使用的是 &lt;=，那么最终区间缩小到一个点时，left一定是 &gt; target的（最后一位元素是target的特殊情况除外）</span>
        	<span class="token comment">// 如果最后一位元素是target，则 nums[left] == target，在循环结束后单独对这种情况处理</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token comment">// &gt; target</span>
              right <span class="token operator">=</span> mid
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 数组的最后一个元素是target的情况</span>
          end <span class="token operator">=</span> left<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 寻找到的是C点，因此B点 = left - 1</span>
          end <span class="token operator">=</span> left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>最好是一步步把计算过程列出来，会更方便理解。</p> <p>完整代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number[]}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">searchRange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> end <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  
  	<span class="token comment">// 寻找A点</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">//  &gt;= target</span>
                right <span class="token operator">=</span> mid<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            start <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
  
  	<span class="token comment">// 寻找B点，即先找到C点，然后 B = C - 1</span>
    <span class="token punctuation">{</span>
      	<span class="token comment">// 如果A点不存在，即数组中不存在target，则B点也必然不存在</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          	<span class="token comment">// 寻找C点</span>
            <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token comment">// &gt; target</span>
                    right <span class="token operator">=</span> mid
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 数组的最后一个元素是target的情况</span>
                end <span class="token operator">=</span> left<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 寻找的是最后一个target的下一个点，即C点，则 B = C - 1</span>
                end <span class="token operator">=</span> left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">[</span>start<span class="token punctuation">,</span> end<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="lc-658-找到-k-个最接近的元素"><a href="#lc-658-找到-k-个最接近的元素" class="header-anchor">#</a> <a href="https://leetcode.cn/problems/find-k-closest-elements/" target="_blank" rel="noopener noreferrer">LC 658. 找到 K 个最接近的元素<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Q：</p> <blockquote><p>给定一个 排序好 的数组 arr ，两个整数 k 和 x ，从数组中找到最靠近 x（两数之差最小）的 k 个数。返回的结果必须要是按升序排好的。</p> <p>整数 a 比整数 b 更接近 x 需要满足：</p> <p>|a - x| &lt; |b - x| 或者
|a - x| == |b - x| 且 a &lt; b</p> <p>提示：</p> <p>1 &lt;= k &lt;= arr.length
1 &lt;= arr.length &lt;= 104
arr 按 升序 排列
-104 &lt;= arr[i], x &lt;= 104</p> <p>来源：力扣（LeetCode）
链接：https://leetcode.cn/problems/find-k-closest-elements
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p></blockquote> <p>A：这道题值得好好讲一讲，很多算法题都需要变通，即 很多算法题都遵循该公式：<code>算法题 = 基础算法 + 题目变形</code>。因此很多算法题都需要以下两步思考：</p> <ol><li>找出基础算法，即题目考察的核心算法，比如本题中，在数组中寻找符合条件的k个数，本质就是数组中寻找符合条件的某个数，一般来说，应用二分法模板二</li> <li>找出题目变形，即题目在基础算法的基础上做了某些变化，需要对基础算法做改进才行，因此要先找出题目的变化点。例如本题中，条件为：更靠近x的k个数，即求对x差值的绝对值最小的k个数（左侧优先），那么我们可以把数组转变为对 x差值的绝对值数组。</li></ol> <p>结合一个例子来分析，对于数组[1,2,3,4,5,6,7,8,9,10]，寻找x=6的k个数。左图为原数组折线，右图为每个值与x=6求差值绝对值的数组折线</p> <p>原数组折线图：</p> <p><img src="/assets/img/t_2_658_1.b1043035.jpg" alt="原数组"></p> <p>绝对差值数组折线图：</p> <p><img src="/assets/img/t_2_658_2.5abfc7c6.jpg" alt="绝对差值数组"></p> <p>可以发现，折线变成了一个V型图（还有两种边界情况，一条斜向下的折线或一条斜向上的折线，分析方法是一样的），那么题目就可以转化为：对差值绝对值数组（右边V型图）中，求离x=6（左右相等时，左边优先)的k个原始点。</p> <p>则可明显的看出，是求绝对差值数组V型图中最底部k个点（左边点优先），至此已经完成了两步分析：</p> <ul><li>基本算法，为二分法模板二</li> <li>题目变形，是求绝对差值数组V型图中最底部k个点（左边点优先）</li></ul> <p>假设k=4，即求离x=6最近的4个点，则步骤就类似下面两张图，从第一张图逼近到第二张图，第二张图的 [A,B)个点就是离x=6最近的4个点</p> <p><img src="/assets/img/t_2_658_3.86f10cca.jpg" alt=""></p> <p><img src="/assets/img/t_2_658_4.ab020cbf.jpg" alt=""></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {number[]} arr
 * @param {number} k
 * @param {number} x
 * @return {number[]}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">findClosestElements</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> k<span class="token punctuation">,</span> x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">const</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 这里需要保证 mid + k 不出界限，当mid = max_right时，也要满足mid + k &lt; n，因此直接让右边界缩减k-1个数，</span>
    <span class="token keyword">let</span> right <span class="token operator">=</span> n <span class="token operator">-</span> k<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment">// 集合上面两张图理解，在绝对差值数组中，符合条件的k个点一定是 最左侧的点 &lt;= 最右侧的点</span>
      	<span class="token comment">// 左侧绝对差值点可以用 x - arr[mid] 表达，右侧绝对差值点可以用 arr[mid + k] - x 表达，注意，这里并没有用绝对差值，用差值表示出相对关系即可</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>mid <span class="token operator">+</span> k<span class="token punctuation">]</span> <span class="token operator">-</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            right <span class="token operator">=</span> mid<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  	
  	<span class="token comment">// 最后结果区间就为 [left, left+k) 这 k个点，即 left 最终到达符合条件的A点</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> left <span class="token operator">+</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>注意点：</p> <ol><li><code>right = n - k</code> 的理解，由于需要保证  mid + k &lt; n，则 mid &lt; n - k，由于 while(left &lt; right)，结合mid向下取中的特性，mid的最大值为 right -1，即 right - 1 &lt; n - k，则 right &lt; n - k -1，即right的最大值为 n - k</li> <li><code>x - arr[mid] &gt; arr[mid + k] - x</code>的理解，结合上面两个图的AB点理解</li></ol> <p>注：这个题目很经典，是模板二的进阶，需要好好理解。</p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <ul><li>模板二非常强大，多用于在一个区间内寻找符合条件的某个数，即通过 <code>while (left &lt; right)</code>使区间缩小到一个点 <code>[left, left]</code>，对left这个点进行判断是否是答案。</li> <li>LC34题更适合用模板二，且用该题更容易理解模板二的原理。</li> <li>通过模板二能直接找到A点和C点（对一个非递减区间，寻找A点和B点，且A == B）</li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/9/2022, 5:39:24 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/Algorithm/BinarySearch/BinarySearch_1.html" class="prev">
          二分查找-模板一
        </a></span> <span class="next"><a href="/Algorithm/BinarySearch/BinarySearch_3.html">
          二分查找-模板三
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-3b069fde data-v-349e681a><li class="level-2" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#模板二" class="sidebar-link reco-side-模板二" data-v-3b069fde>模板二</a></li><li class="level-2" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#模板代码" class="sidebar-link reco-side-模板代码" data-v-3b069fde>模板代码</a></li><li class="level-3" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#代码" class="sidebar-link reco-side-代码" data-v-3b069fde>代码</a></li><li class="level-3" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#区分语法" class="sidebar-link reco-side-区分语法" data-v-3b069fde>区分语法</a></li><li class="level-2" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#例题" class="sidebar-link reco-side-例题" data-v-3b069fde>例题</a></li><li class="level-3" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#lc-278-第一个错误的版本" class="sidebar-link reco-side-lc-278-第一个错误的版本" data-v-3b069fde>LC 278. 第一个错误的版本</a></li><li class="level-3" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#lc-162-寻找峰值" class="sidebar-link reco-side-lc-162-寻找峰值" data-v-3b069fde>LC 162. 寻找峰值</a></li><li class="level-3" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#lc-153-寻找旋转排序数组中的最小值" class="sidebar-link reco-side-lc-153-寻找旋转排序数组中的最小值" data-v-3b069fde>LC 153. 寻找旋转排序数组中的最小值</a></li><li class="level-3" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#lc-34-在排序数组中查找元素的第一个和最后一个位置" class="sidebar-link reco-side-lc-34-在排序数组中查找元素的第一个和最后一个位置" data-v-3b069fde>LC 34. 在排序数组中查找元素的第一个和最后一个位置</a></li><li class="level-3" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#lc-658-找到-k-个最接近的元素" class="sidebar-link reco-side-lc-658-找到-k-个最接近的元素" data-v-3b069fde>LC 658. 找到 K 个最接近的元素</a></li><li class="level-2" data-v-3b069fde><a href="/Algorithm/BinarySearch/BinarySearch_2.html#小结" class="sidebar-link reco-side-小结" data-v-3b069fde>小结</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a01419c data-v-2a01419c><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a01419c><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a01419c></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a01419c></path></svg></div></div></div>
    <script src="/assets/js/app.3efcfa1f.js" defer></script><script src="/assets/js/3.d41f5393.js" defer></script><script src="/assets/js/1.0d0e82e9.js" defer></script><script src="/assets/js/8.c5d718a6.js" defer></script>
  </body>
</html>
