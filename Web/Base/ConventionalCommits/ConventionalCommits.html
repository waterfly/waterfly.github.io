<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>约定式提交规范 | WaterFly</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Just Coding">
    
    <link rel="preload" href="/assets/css/0.styles.84748982.css" as="style"><link rel="preload" href="/assets/js/app.3efcfa1f.js" as="script"><link rel="preload" href="/assets/js/3.d41f5393.js" as="script"><link rel="preload" href="/assets/js/1.0d0e82e9.js" as="script"><link rel="preload" href="/assets/js/13.bfe6e49a.js" as="script"><link rel="prefetch" href="/assets/js/10.6a591f7b.js"><link rel="prefetch" href="/assets/js/11.2da2c136.js"><link rel="prefetch" href="/assets/js/12.597e1e9e.js"><link rel="prefetch" href="/assets/js/14.d5101ebe.js"><link rel="prefetch" href="/assets/js/15.d075eb78.js"><link rel="prefetch" href="/assets/js/16.1de846ec.js"><link rel="prefetch" href="/assets/js/17.73e1206f.js"><link rel="prefetch" href="/assets/js/18.3563029d.js"><link rel="prefetch" href="/assets/js/19.018202b6.js"><link rel="prefetch" href="/assets/js/20.92e231d8.js"><link rel="prefetch" href="/assets/js/21.a26b4bf6.js"><link rel="prefetch" href="/assets/js/22.a240a942.js"><link rel="prefetch" href="/assets/js/23.5d73353d.js"><link rel="prefetch" href="/assets/js/24.1a101222.js"><link rel="prefetch" href="/assets/js/25.f7c05ac5.js"><link rel="prefetch" href="/assets/js/26.cf0f99d3.js"><link rel="prefetch" href="/assets/js/27.4412c990.js"><link rel="prefetch" href="/assets/js/28.a9e9a7e1.js"><link rel="prefetch" href="/assets/js/29.9b39ea41.js"><link rel="prefetch" href="/assets/js/30.19dafc01.js"><link rel="prefetch" href="/assets/js/31.9d2c45f0.js"><link rel="prefetch" href="/assets/js/32.f7aa758f.js"><link rel="prefetch" href="/assets/js/33.54518586.js"><link rel="prefetch" href="/assets/js/34.71ab4ffb.js"><link rel="prefetch" href="/assets/js/35.5442dc08.js"><link rel="prefetch" href="/assets/js/36.3d80fb49.js"><link rel="prefetch" href="/assets/js/37.d767afa3.js"><link rel="prefetch" href="/assets/js/38.15d6331f.js"><link rel="prefetch" href="/assets/js/39.a6c25426.js"><link rel="prefetch" href="/assets/js/4.d08f1479.js"><link rel="prefetch" href="/assets/js/40.87d678b9.js"><link rel="prefetch" href="/assets/js/41.edd890b5.js"><link rel="prefetch" href="/assets/js/42.d6677079.js"><link rel="prefetch" href="/assets/js/43.ff4d75ff.js"><link rel="prefetch" href="/assets/js/44.32c7a951.js"><link rel="prefetch" href="/assets/js/45.2c851721.js"><link rel="prefetch" href="/assets/js/46.9bbe5a11.js"><link rel="prefetch" href="/assets/js/47.0e2c36cc.js"><link rel="prefetch" href="/assets/js/48.09bc8442.js"><link rel="prefetch" href="/assets/js/49.52342b74.js"><link rel="prefetch" href="/assets/js/5.9634f48e.js"><link rel="prefetch" href="/assets/js/50.c9e3c4c5.js"><link rel="prefetch" href="/assets/js/51.28a51db9.js"><link rel="prefetch" href="/assets/js/52.58832236.js"><link rel="prefetch" href="/assets/js/53.86af7b76.js"><link rel="prefetch" href="/assets/js/54.973c15bf.js"><link rel="prefetch" href="/assets/js/55.d4a03e12.js"><link rel="prefetch" href="/assets/js/56.ac7e97e0.js"><link rel="prefetch" href="/assets/js/57.7fa14d11.js"><link rel="prefetch" href="/assets/js/58.b0f390b8.js"><link rel="prefetch" href="/assets/js/59.62b96874.js"><link rel="prefetch" href="/assets/js/6.4c543392.js"><link rel="prefetch" href="/assets/js/60.0c40514a.js"><link rel="prefetch" href="/assets/js/61.65259e68.js"><link rel="prefetch" href="/assets/js/62.9fb64114.js"><link rel="prefetch" href="/assets/js/63.3975ffd5.js"><link rel="prefetch" href="/assets/js/64.911d2812.js"><link rel="prefetch" href="/assets/js/65.ce9ab40b.js"><link rel="prefetch" href="/assets/js/66.b89de3df.js"><link rel="prefetch" href="/assets/js/67.4169b86c.js"><link rel="prefetch" href="/assets/js/68.a812ad4b.js"><link rel="prefetch" href="/assets/js/69.b0c76c03.js"><link rel="prefetch" href="/assets/js/7.2aba56aa.js"><link rel="prefetch" href="/assets/js/70.9749f302.js"><link rel="prefetch" href="/assets/js/71.0d38010b.js"><link rel="prefetch" href="/assets/js/72.a6338004.js"><link rel="prefetch" href="/assets/js/73.c1001eb8.js"><link rel="prefetch" href="/assets/js/74.0069037e.js"><link rel="prefetch" href="/assets/js/75.c4591a8d.js"><link rel="prefetch" href="/assets/js/76.e1a3f216.js"><link rel="prefetch" href="/assets/js/77.df0b0aac.js"><link rel="prefetch" href="/assets/js/78.2f535a98.js"><link rel="prefetch" href="/assets/js/79.60e4b9f5.js"><link rel="prefetch" href="/assets/js/8.c5d718a6.js"><link rel="prefetch" href="/assets/js/80.50af71ac.js"><link rel="prefetch" href="/assets/js/81.7d753c90.js"><link rel="prefetch" href="/assets/js/82.5703b0fa.js"><link rel="prefetch" href="/assets/js/83.4af8ebaa.js"><link rel="prefetch" href="/assets/js/84.ed963d52.js"><link rel="prefetch" href="/assets/js/85.7cb175ff.js"><link rel="prefetch" href="/assets/js/86.bd0d1f92.js"><link rel="prefetch" href="/assets/js/87.f00e8426.js"><link rel="prefetch" href="/assets/js/88.a34c0493.js"><link rel="prefetch" href="/assets/js/89.564cb64c.js"><link rel="prefetch" href="/assets/js/9.25143fa3.js"><link rel="prefetch" href="/assets/js/90.ce031d67.js"><link rel="prefetch" href="/assets/js/91.2a75f163.js"><link rel="prefetch" href="/assets/js/92.a2591da3.js"><link rel="prefetch" href="/assets/js/93.6af4f4b0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.84748982.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-349e681a><div data-v-349e681a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-b3e6ef50 data-v-349e681a data-v-349e681a><h3 class="title" data-v-b3e6ef50>WaterFly</h3> <p class="description" data-v-b3e6ef50>Just Coding</p> <label id="box" class="inputBox" data-v-b3e6ef50><input type="password" value="" data-v-b3e6ef50> <span data-v-b3e6ef50>Konck! Knock!</span> <button data-v-b3e6ef50>OK</button></label> <div class="footer" data-v-b3e6ef50><span data-v-b3e6ef50><i class="iconfont reco-theme" data-v-b3e6ef50></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-b3e6ef50>vuePress-theme-reco</a></span> <span data-v-b3e6ef50><i class="iconfont reco-copyright" data-v-b3e6ef50></i> <a data-v-b3e6ef50><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-349e681a><header class="navbar" data-v-349e681a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">WaterFly</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/Algorithm/" class="nav-link"><i class="undefined"></i>
  算法
</a></div><div class="nav-item"><a href="/Web/" class="nav-link router-link-active"><i class="undefined"></i>
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      iOS
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/Swift/" class="nav-link"><i class="undefined"></i>
  Swift
</a></li><li class="dropdown-item"><!----> <a href="/iOS/RN/" class="nav-link"><i class="undefined"></i>
  RN
</a></li><li class="dropdown-item"><!----> <a href="/iOS/OC/" class="nav-link"><i class="undefined"></i>
  OC
</a></li></ul></div></div><div class="nav-item"><a href="/Other/" class="nav-link"><i class="undefined"></i>
  Other
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="https://github.com/waterfly" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-349e681a></div> <aside class="sidebar" data-v-349e681a><div class="personal-info-wrapper" data-v-1bfe3fa5 data-v-349e681a><img src="/bike.png" alt="author-avatar" class="personal-img" data-v-1bfe3fa5> <!----> <div class="num" data-v-1bfe3fa5><div data-v-1bfe3fa5><h3 data-v-1bfe3fa5>83</h3> <h6 data-v-1bfe3fa5>Articles</h6></div> <div data-v-1bfe3fa5><h3 data-v-1bfe3fa5>34</h3> <h6 data-v-1bfe3fa5>Tags</h6></div></div> <ul class="social-links" data-v-1bfe3fa5></ul> <hr data-v-1bfe3fa5></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/Algorithm/" class="nav-link"><i class="undefined"></i>
  算法
</a></div><div class="nav-item"><a href="/Web/" class="nav-link router-link-active"><i class="undefined"></i>
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      iOS
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/Swift/" class="nav-link"><i class="undefined"></i>
  Swift
</a></li><li class="dropdown-item"><!----> <a href="/iOS/RN/" class="nav-link"><i class="undefined"></i>
  RN
</a></li><li class="dropdown-item"><!----> <a href="/iOS/OC/" class="nav-link"><i class="undefined"></i>
  OC
</a></li></ul></div></div><div class="nav-item"><a href="/Other/" class="nav-link"><i class="undefined"></i>
  Other
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="https://github.com/waterfly" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><a href="/Web/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/Web/FrontLearning.html" class="sidebar-link">前端学习规划</a></li><li><a href="/Web/VSCode.html" class="sidebar-link">VSCode</a></li><li><a href="/Web/AppBuild/BuildSystemWorkDiary.html" class="sidebar-link">构建系统开发纪要</a></li><li><a href="/Web/Hexo/服务器上搭建hexo博客.html" class="sidebar-link">服务器上搭建hexo博客</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web/Vue/VueComponentDemo.html" class="sidebar-link">开发一个Vue组件</a></li><li><a href="/Web/Vue/BuildVuePress/buildVuePress.html" class="sidebar-link">从零搭建VuePress站点</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>VueRouter学习笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web/Vue/router/VueRouterNoteCore.html" class="sidebar-link">Vue Router 学习笔记-核心</a></li><li><a href="/Web/Vue/router/VueRouterNoteExtend.html" class="sidebar-link">Vue Router 学习笔记-扩展</a></li></ul></section></li><li><a href="/Web/Vue/VueEcosystem/VueEcosystem.html" class="sidebar-link">Vue生态库</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端工程基建</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html" aria-current="page" class="active sidebar-link">约定式提交规范</a></li><li><a href="/Web/Base/YAML.html" class="sidebar-link">YAML语法规则</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>项目经验</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web/Project/JSMpeg.html" class="sidebar-link">使用JSMpeg实现视频自动播放</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-b3e6ef50 data-v-349e681a><h3 class="title" data-v-b3e6ef50>约定式提交规范</h3> <!----> <label id="box" class="inputBox" data-v-b3e6ef50><input type="password" value="" data-v-b3e6ef50> <span data-v-b3e6ef50>Konck! Knock!</span> <button data-v-b3e6ef50>OK</button></label> <div class="footer" data-v-b3e6ef50><span data-v-b3e6ef50><i class="iconfont reco-theme" data-v-b3e6ef50></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-b3e6ef50>vuePress-theme-reco</a></span> <span data-v-b3e6ef50><i class="iconfont reco-copyright" data-v-b3e6ef50></i> <a data-v-b3e6ef50><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-349e681a><div data-v-349e681a><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">约定式提交规范</h1> <div data-v-0b291498><!----> <i class="iconfont reco-date" data-v-0b291498><span data-v-0b291498>5/23/2023</span></i> <!----> <i class="tags iconfont reco-tag" data-v-0b291498><span class="tag-item" data-v-0b291498>base</span></i></div></div> <div class="theme-reco-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#conventional-commits">Conventional Commits</a><ul><li><a href="#背景">背景</a></li><li><a href="#为什么使用约定式提交">为什么使用约定式提交</a></li><li><a href="#整体认知">整体认知</a></li><li><a href="#规范文档">规范文档</a></li><li><a href="#规范配置文件">规范配置文件</a></li><li><a href="#commitlint">Commitlint</a></li><li><a href="#git-hooks">Git hooks</a><ul><li><a href="#husky">husky</a></li><li><a href="#simple-git-hooks">simple-git-hooks</a></li><li><a href="#关于-commitlint-提交命令">关于 commitlint 提交命令</a></li><li><a href="#vue3-工程中规范提交检查的实现">vue3 工程中规范提交检查的实现</a></li></ul></li><li><a href="#工程落地完整实践">工程落地完整实践</a></li><li><a href="#交互提示工具">交互提示工具</a><ul><li><a href="#commitizen">Commitizen</a></li><li><a href="#cz-git-和-czg">cz-git 和 czg</a><ul><li><a href="#cg-git">cg-git</a></li><li><a href="#czg">czg</a></li></ul></li><li><a href="#基于czg的最佳工程实践">基于czg的最佳工程实践</a></li></ul></li><li><a href="#changelog">CHANGELOG</a></li><li><a href="#附录">附录</a></li></ul></li></ul></div><p></p> <h1 id="conventional-commits"><a href="#conventional-commits" class="header-anchor">#</a> Conventional Commits</h1> <p>约定式提交规范，一种用于给提交信息增加人机可读含义的规范。</p> <h2 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h2> <p>一般工程提交信息写的过于随意没有一定的规则，这会导致两个问题：</p> <ul><li>追溯历史提交记录时不方便，无法准确定位某次提交的具体作用，比较费时间，尤其在多人协作项目中</li> <li>无法自动生成 CHANGELOG</li></ul> <p>因此有了<strong>Conventional Commits</strong>（约定式提交规范），遵守该规范会使提交信息更可读，且方便自动生成 CHANGELOG，并可自动决定语义化的版本变更。</p> <p>具体规范参考：<a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">Conventional Commits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>这里引用官方规范文档中文案：</p> <blockquote><h2 id="为什么使用约定式提交"><a href="#为什么使用约定式提交" class="header-anchor">#</a> 为什么使用约定式提交</h2> <ul><li>自动化生成 CHANGELOG。</li> <li>基于提交的类型，自动决定语义化的版本变更。</li> <li>向同事、公众与其他利益关系者传达变化的性质。</li> <li>触发构建和部署流程。</li> <li>让人们探索一个更加结构化的提交历史，以便降低对你的项目做出贡献的难度。</li></ul></blockquote> <h2 id="整体认知"><a href="#整体认知" class="header-anchor">#</a> 整体认知</h2> <p>为了工程中落地使用<strong>Conventional Commits</strong>，牵涉到不同层面的库，东西比较多，一开始容易一头雾水，先看一个整体架构图，有个直观的印象：</p> <p><img src="/assets/img/arch.1d638c32.png" alt=""></p> <p>一层层解释下：</p> <ul><li><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">Conventional Commits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，规范文档，该文档为官方文档，定义了约定式提交规范的基本内容</li> <li><a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，@commitlint/cli，lint 工具，使用该工具对提交信息进行 lint</li> <li><a href="https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional" target="_blank" rel="noopener noreferrer">@commitlint/config-conventional<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，规范配置文件，定义工程的约定式提交规范，commitlint 需要使用配置文件的定义对提交信息进行检查，规范配置文件有很多，一般使用该配置文件，可以基于该配置文件自定义</li> <li>Git hook，使用 <a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://github.com/toplenboren/simple-git-hooks" target="_blank" rel="noopener noreferrer">simple-git-hooks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，Git 钩子工具，用于在提交时调用 commitlint 命令对提交进行 lint，simple-git-hooks 比较轻量，如果自定义东西比较多时考虑使用 husky</li> <li>交互式提示工具，<a href="https://github.com/commitizen-tools/commitizen" target="_blank" rel="noopener noreferrer">Commitizen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://cz-git.qbb.sh/zh/" target="_blank" rel="noopener noreferrer">cg-git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，可以通过交互式命令生成遵守规范的提交</li> <li>CHANAGELOG 工具，<a href="https://github.com/conventional-changelog/conventional-changelog" target="_blank" rel="noopener noreferrer">conventional-changelog-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://github.com/googleapis/release-please" target="_blank" rel="noopener noreferrer">release-please<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，在遵守约定式提交规范的基础上，自动根据 log 生成 CHANGELOG</li></ul> <p>其中 commitlint、规范配置文件、git hook 三者是必须的，工程中配置这三个后，每次提交即会自动检查 commit message 是否符合规范</p> <h2 id="规范文档"><a href="#规范文档" class="header-anchor">#</a> 规范文档</h2> <p>约定式提交规范官方规范文档 <a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">Conventional Commits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，文档详细介绍了约定式提交规范的基本内容。</p> <p>规范提交的基本格式为：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;type&gt;[optional scope]: &lt;description&gt;

[optional body]

[optional footer(s)]


// ---------------------
// 译文
&lt;类型&gt;[可选 范围]: &lt;描述&gt;

[可选 正文]

[可选 脚注]
</code></pre></div><p>核心点：</p> <blockquote><p>提交说明包含了下面的结构化元素，以向类库使用者表明其意图：</p> <ol><li><strong>fix:</strong> <em>类型</em> 为 <code>fix</code> 的提交表示在代码库中修复了一个 bug（这和语义化版本中的 <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81" target="_blank" rel="noopener noreferrer"><code>PATCH</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 相对应）。</li> <li><strong>feat:</strong> <em>类型</em> 为 <code>feat</code> 的提交表示在代码库中新增了一个功能（这和语义化版本中的 <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81" target="_blank" rel="noopener noreferrer"><code>MINOR</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 相对应）。</li> <li><strong>BREAKING CHANGE:</strong> 在脚注中包含 <code>BREAKING CHANGE:</code> 或 &lt;类型&gt;(范围) 后面有一个 <code>!</code> 的提交，表示引入了破坏性 API 变更（这和语义化版本中的 <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81" target="_blank" rel="noopener noreferrer"><code>MAJOR</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 相对应）。 破坏性变更可以是任意 <em>类型</em> 提交的一部分。</li> <li>除 <code>fix:</code> 和 <code>feat:</code> 之外，也可以使用其它提交 <em>类型</em> ，例如 <a href="https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional" target="_blank" rel="noopener noreferrer">@commitlint/config-conventional<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（基于 <a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines" target="_blank" rel="noopener noreferrer">Angular 约定<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）中推荐的 <code>build:</code>、<code>chore:</code>、 <code>ci:</code>、<code>docs:</code>、<code>style:</code>、<code>refactor:</code>、<code>perf:</code>、<code>test:</code>，等等。</li> <li>脚注中除了 <code>BREAKING CHANGE: &lt;description&gt;</code> ，其它条目应该采用类似 <a href="https://git-scm.com/docs/git-interpret-trailers" target="_blank" rel="noopener noreferrer">git trailer format<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 这样的惯例。</li></ol> <p>其它提交类型在约定式提交规范中并没有强制限制，并且在语义化版本中没有隐式影响（除非它们包含 BREAKING CHANGE）。 可以为提交类型添加一个围在圆括号内的范围，以为其提供额外的上下文信息。例如 <code>feat(parser): adds ability to parse arrays.</code>。</p></blockquote> <p>示例：</p> <div class="language- extra-class"><pre class="language-text"><code>// 普通功能提交
feat: complete a feature

//包含 BREAKING CHANGE
feat: allow provided config object to extend other configs

BREAKING CHANGE: `extends` key in config file is now used for extending other config files

// 或者直接使用 ! 符号
feat!: send an email to the customer when a product is shipped

// 包含范围的提交说明
feat(lang): add polish language

// 包含多行正文和多行脚注的提交说明
fix: prevent racing of requests

Introduce a request id and a reference to latest request. Dismiss
incoming responses other than from latest request.

Remove timeouts which were used to mitigate the racing issue but are
obsolete now.

Reviewed-by: Z
Refs: #123
</code></pre></div><p>规范文档约定了轻量级的规范，具体落地到工程需要规范配置文件。</p> <p>注：一般来说脚注用来放 BREAKING CHANGE、issue 关闭、作者、参考等</p> <h2 id="规范配置文件"><a href="#规范配置文件" class="header-anchor">#</a> 规范配置文件</h2> <p>一般工程常用的是<a href="https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional" target="_blank" rel="noopener noreferrer">@commitlint/config-conventional<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，该规范基于 <a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines" target="_blank" rel="noopener noreferrer">Angular 约定<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，规定 type 为以下类型</p> <ul><li><code>feat</code> 增加新功能</li> <li><code>fix</code> 修复问题/BUG</li> <li><code>perf</code> 优化/性能提升</li> <li><code>style</code> 代码风格相关无影响运行结果的 (空格、格式化、逗号分号, 等等)</li> <li><code>refactor</code> 代码重构（既不修复 bug，也不增加功能）</li> <li><code>docs</code> 文档/注释</li> <li><code>test</code> 测试相关</li> <li><code>revert</code> 撤销修改</li> <li><code>chore</code> 依赖更新/脚手架配置修改等（不改变 src 或测试文件，仅仅更新构建任务、包管理等）</li> <li><code>build</code> 构造工具的或者外部依赖的改动，例如 webpack，npm</li> <li><code>ci</code> 与 CI（持续集成服务）有关的改动</li></ul> <p>详细配置见：<a href="https://github.com/conventional-changelog/commitlint/blob/master/%40commitlint/config-conventional/index.js" target="_blank" rel="noopener noreferrer">index.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>基本以上配置已经覆盖了绝大多数工程需求，如果需要加入自定义内容，可以基于该配置文件，添加自定义修改。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>//工程添加 @commitlint/config-conventional
<span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> @commitlint/config-conventional
</code></pre></div><h2 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> Commitlint</h2> <p><a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是核心，使用该 lint 工具基于规范配置文件对提交信息进行 lint 检查。官方文档写了很多东西，其实核心是使用 commitlint 进行 lint 检查，使用是很简单的，前期可以抛开文档中其他部分，先用起来，后面可以慢看看文档，文档基本覆盖了约定式提交规范的全部内容，工具链也比较多。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>// 添加 @commitlint/cli
<span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> @commitlint/cli

// 指定配置文件 package.json 中增加以下内容，这会直接使用 @commitlint/config-conventional 配置，当需要自定义时，可建文件
<span class="token punctuation">{</span>
 <span class="token string">&quot;commitlint&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;extends&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;@commitlint/config-conventional&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置文件可以是以下文件：</p> <ul><li><code>.commitlintrc</code></li> <li><code>.commitlintrc.json</code></li> <li><code>.commitlintrc.yaml</code></li> <li><code>.commitlintrc.yml</code></li> <li><code>.commitlintrc.js</code></li> <li><code>.commitlintrc.cjs</code></li> <li><code>.commitlintrc.ts</code></li> <li><code>.commitlintrc.cts</code></li> <li><code>commitlint.config.js</code></li> <li><code>commitlint.config.cjs</code></li> <li><code>commitlint.config.ts</code></li> <li><code>commitlint.config.cts</code></li> <li><code>commitlint</code> field in <code>package.json</code></li></ul> <p>简单使用<code>@commitlint/config-conventional</code>时，直接在 package.json 中配置即可，如果需要复杂自定义，可在工程中建一个对应的配置文件进行自定义，自定义规则参考：<a href="https://commitlint.js.org/#/reference-configuration" target="_blank" rel="noopener noreferrer">Configuration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://commitlint.js.org/#/reference-rules" target="_blank" rel="noopener noreferrer">Rules<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>下一步，需要在执行 git commit 命令时自动执行 lint 检查</p> <h2 id="git-hooks"><a href="#git-hooks" class="header-anchor">#</a> Git hooks</h2> <p>commitlint 的执行期望是在提交的时候，即执行 git commit 命令时候执行检查，这时候需要 git hook。</p> <p>目前常用的 Git hooks 工具有 <a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://github.com/toplenboren/simple-git-hooks" target="_blank" rel="noopener noreferrer">simple-git-hooks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<code>simple-git-hooks</code>更轻量上手更简单，<code>husky</code>配置更多。即无特殊自定义配置，直接用<code>simple-git-hooks</code>，自定义配置较多的情况下使用<code>husky</code>。</p> <h3 id="husky"><a href="#husky" class="header-anchor">#</a> husky</h3> <p>husky的集成也比较简单，husky会在工程root目录下创建<code>.husky</code>目录，里面会存放对应钩子文件执行对应命令</p> <p>资料：</p> <ul><li><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">huksy-Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://typicode.github.io/husky/" target="_blank" rel="noopener noreferrer">husky-doc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>集成方法：</p> <div class="language- extra-class"><pre class="language-text"><code>// 1. 自动安装husky
pnpm dlx husky-init &amp;&amp; pnpm install

// 2. 给husky增加hook命令，例如增加commitlint
pnpx husky add .husky/commit-msg 'npx --no -- commitlint --edit &quot;$1&quot;'


// 执行完第一条命令，工程会自动安装husky，并创建 .husky 文件，并在package.json里增加prepage脚本命令
{
  &quot;scripts&quot;: {
    &quot;prepare&quot;: &quot;husky install&quot;
  },
}



// 工程目录如下，husky会在工程root目录下创建 .husky 文件，相关钩子命令会在里面对应的文件里，如 commit-msg 文件
.
├── .git
│   └── sourcetreeconfig
├── .gitignore
├── .husky
│   ├── _
│   ├── commit-msg		# 对应钩子文件，里面写入对应需要执行的钩子命令
│   └── pre-commit		# 对应钩子文件

// commit-msg文件内容
#!/usr/bin/env sh
. &quot;$(dirname -- &quot;$0&quot;)/_/husky.sh&quot;

npx --no -- commitlint --edit &quot;$1&quot;


</code></pre></div><h3 id="simple-git-hooks"><a href="#simple-git-hooks" class="header-anchor">#</a> simple-git-hooks</h3> <p>commilint 官方文旦使用的 husky，我们这里使用 simple-git-hooks 来配置 commitlint</p> <div class="language-shell extra-class"><pre class="language-shell"><code>// <span class="token number">1</span>.add simple-git-hooks
<span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> simple-git-hooks

// <span class="token number">2</span>. package.json添加以下内容
<span class="token punctuation">{</span>
  <span class="token string">&quot;simple-git-hooks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
  	<span class="token string">&quot;commit-msg&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;pnpm commitlint&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

// <span class="token number">3</span>. package.json中配置 postinstall 钩子，该钩子每次执行安装后使 simple-git-hooks 生效（其实simple-git-hooks命令执行一次即可）
<span class="token punctuation">{</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
  	<span class="token string">&quot;postinstall&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;pnpm simple-git-hooks&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

// 注，simple-git-hooks官方的命令如下，如果是从husky迁移的需要注意：
<span class="token comment"># [Optional] These 2 steps can be skipped for non-husky users</span>
<span class="token function">git</span> config core.hooksPath .git/hooks/
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> .git/hooks

<span class="token comment"># Update ./git/hooks</span>
npx simple-git-hooks

</code></pre></div><p>工程添加该配置后，执行 pnpm i，然后尝试修改提交，commilint 就会按照 @commitlint/config-conventional 的配置进行规范提交检查了。</p> <h3 id="关于-commitlint-提交命令"><a href="#关于-commitlint-提交命令" class="header-anchor">#</a> 关于 commitlint 提交命令</h3> <ul><li>官方文档集成 husky 时的命令是：<code>commitlint --edit ${1}</code></li> <li>集成 simple-git-hooks 的命令是：<code>commitlint</code></li></ul> <p>对这个命令很费解，到底需要不需要 --edit 参数？</p> <p>commlint 对--edit 参数的解释是：</p> <blockquote><p>-e, --edit read last commit message from the specified file or fallbacks to ./.git/COMMIT_EDITMSG [string]</p></blockquote> <p>看完仍是很困惑，最终找到了<a href="https://note.xiexuefeng.cc/post/husky-and-git-hooks/#%E5%9C%A8-commit-msg-%E9%92%A9%E5%AD%90%E4%B8%AD%E8%8E%B7%E5%8F%96%E4%BF%AE%E6%94%B9-commit-%E6%B6%88%E6%81%AF" target="_blank" rel="noopener noreferrer">一篇文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>解释：</p> <blockquote><p>执行<code>commit</code>命令后，<code>git</code>会将<code>commit</code>消息存放于一个临时文件中；然后触发<code>pre-commit</code>钩子，<code>pre-commit</code>钩子成功之后就会触发<code>commit-msg</code>，<code>commit-msg</code>钩子成功后则会将临时文件中的文本作为此次<code>commit</code>消息进行存储；</p> <p>并且<code>commit-msg</code>钩子会对脚本传一个参数，这个参数就是存放<code>commit</code>消息的临时文件的路径；所以得到这个参数，就可以读取该文件的内容，也就能得到当前<code>commit</code>消息了；同理，在<code>commit-msg</code>钩子中覆盖这个文件就能对此次<code>commit</code>消息进行修改了；</p> <blockquote><p>It takes a single parameter, the name of the file that holds the proposed commit log message.[<a href="https://note.xiexuefeng.cc/post/husky-and-git-hooks/#fn1" target="_blank" rel="noopener noreferrer">1]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>不过，由于在<code>husky</code>中的指定的<code>commit-msg</code>钩子命令并不是 git 直接执行的，因此只能通过<code>husky</code>间接暴露的变量<code>$HUSKY_GIT_PARAMS</code>来获取临时文件的地址，如：</p> <div class="language- extra-class"><pre class="language-text"><code># $HUSKY_GIT_PARAMS变量就是commit-msg钩子传递的文件路径参数
node ./hooks/commit-msg $HUSKY_GIT_PARAMS
</code></pre></div><blockquote><p>Git hooks can get parameters via command-line arguments and stdin. Husky makes them accessible via HUSKY_GIT_PARAMS and HUSKY_GIT_STDIN environment variables.[<a href="https://note.xiexuefeng.cc/post/husky-and-git-hooks/#fn2" target="_blank" rel="noopener noreferrer">2]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></blockquote> <p>其中$1 就是<a href="https://typicode.github.io/husky/#migrate-from-v4-to-v8" target="_blank" rel="noopener noreferrer">HUSKY_GIT_PARAMS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，就是 commit-msg 钩子传递的文件路径参数</p> <blockquote><ul><li><code>HUSKY_GIT_PARAMS</code> is removed. Instead Git parameters should be used directly in scripts (e.g. <code>$1</code>).</li></ul></blockquote> <p>综合起来看，$1 就是 husky 暴露的 commit-msg 钩子传递的文件路径参数。即 `commitlint --edit ${1}``，就是对从$1 获取到的提交信息进行 lint。</p> <p>但是 simple-git-hooks 似乎不需要--edit 参数，具体也查到资料，可能是因为 simple-git-hooks 与 husky 实现原理不一样。</p> <h3 id="vue3-工程中规范提交检查的实现"><a href="#vue3-工程中规范提交检查的实现" class="header-anchor">#</a> vue3 工程中规范提交检查的实现</h3> <ul><li><a href="https://github.com/vuejs/core" target="_blank" rel="noopener noreferrer">Vuejs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 工程中 git hooks 工具使用的 simple-git-hooks</li> <li>规范见<a href="https://github.com/vuejs/core/blob/main/.github/commit-convention.md" target="_blank" rel="noopener noreferrer">Git Commit Message Convention<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（This is adapted from <a href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-angular" target="_blank" rel="noopener noreferrer">Angular's commit convention<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.）</li> <li>lint 工具没有采用 commitlint 而是自己写了正则校验</li></ul> <p>推测 Vue 工程因为都是高手，而且 lint 的核心就是正则校验，所以自己写了一个脚本保持代码轻量。</p> <div class="language- extra-class"><pre class="language-text"><code>// package.json
  &quot;simple-git-hooks&quot;: {
    &quot;pre-commit&quot;: &quot;pnpm lint-staged &amp;&amp; pnpm check&quot;,
    &quot;commit-msg&quot;: &quot;node scripts/verifyCommit.js&quot;
  },

// verifyCommit.js 文件通过正则对type进行了校验

// @ts-check
import chalk from 'chalk'
import { readFileSync } from 'fs'
import path from 'path'

const msgPath = path.resolve('.git/COMMIT_EDITMSG')
const msg = readFileSync(msgPath, 'utf-8').trim()

const commitRE =
  /^(revert: )?(feat|fix|docs|dx|style|refactor|perf|test|workflow|build|ci|chore|types|wip|release)(\(.+\))?: .{1,50}/

if (!commitRE.test(msg)) {
  console.log()
  console.error(
    `  ${chalk.bgRed.white(' ERROR ')} ${chalk.red(
      `invalid commit message format.`
    )}\n\n` +
      chalk.red(
        `  Proper commit message format is required for automated changelog generation. Examples:\n\n`
      ) +
      `    ${chalk.green(`feat(compiler): add 'comments' option`)}\n` +
      `    ${chalk.green(
        `fix(v-model): handle events on blur (close #28)`
      )}\n\n` +
      chalk.red(`  See .github/commit-convention.md for more details.\n`)
  )
  process.exit(1)
}
</code></pre></div><h2 id="工程落地完整实践"><a href="#工程落地完整实践" class="header-anchor">#</a> 工程落地完整实践</h2> <div class="language- extra-class"><pre class="language-text"><code>// 1. 添加三个库
pnpm add -D @commitlint/config-conventional
pnpm add -D @commitlint/cli
pnpm add -D simple-git-hooks

// 2. 配置 package.json文件
{
 &quot;scripts&quot;: {
  	&quot;postinstall&quot;: &quot;pnpm simple-git-hooks&quot;
  },
  &quot;simple-git-hooks&quot;: {
  	&quot;commit-msg&quot;: &quot;pnpm commitlint&quot;
  },
  &quot;commitlint&quot;: {
    &quot;extends&quot;: [
      &quot;@commitlint/config-conventional&quot;
    ]
  }
}

// 3 当没有在package.js 中没有配置commitlint，则 工程中添加 .commitlintrc.js 文件，添加以下内容（推荐使用这种方式，避免package.js臃肿，且工程结构清晰）
module.exports = {
  extends: ['@commitlint/config-conventional']
}
</code></pre></div><p>经过以上配置，工程在执行代码提交时，即可实现自动检查。</p> <h2 id="交互提示工具"><a href="#交互提示工具" class="header-anchor">#</a> 交互提示工具</h2> <h3 id="commitizen"><a href="#commitizen" class="header-anchor">#</a> Commitizen</h3> <p><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">Commitizen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个交互性帮助规范 commit message 的工具，按照工具提示一步步即可生成符合指定规范的提交信息。</p> <p><strong>注：commitizen 只是一个交互式生成提交信息的工具，本身并不对提交信息进行 lint</strong>。</p> <p><img src="/assets/img/Commitizen.7e00a4f7.gif" alt=""></p> <p>即交互式的、选项式的一步步生成提交信息，节省了重复输入的时间。</p> <p>详细安装可以参考<a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">Commitizen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>说明，这里简单介绍下：</p> <div class="language- extra-class"><pre class="language-text"><code>//1. 全局安装 commitizen，如果将cz 或 git cz命令加入提交前命令，就需要本地安装，但是一般建议对commitlint加入提交前检查，而commitiizen个人全局安装
npm install -g commitizen

//2. 使工程Commitizen friendly，注这一步使用的是cz-conventional-changelog规范
# npm
commitizen init cz-conventional-changelog--save-dev --save-exact
# yarn
commitizen init cz-conventional-changelog --yarn --dev --exact
# pnpm
commitizen init cz-conventional-changelog --pnpm --save-dev --save-exact

// 配置完后工程package.json会多出
&quot;config&quot;: {
  &quot;commitizen&quot;: {
    &quot;path&quot;: &quot;cz-conventional-changelog&quot;
  }
}

// 然后使用 cz 、 git cz 、git-cz 代替 git commit 命令进行提交，即可出现交互式提示
cz
git cz
git-cz
</code></pre></div><p>上面示例中，使用的是 cz-conventional-changelog 规范，采用的是 Angular 规范，详见<a href="https://github.com/commitizen/conventional-commit-types" target="_blank" rel="noopener noreferrer">conventional-commit-types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>在 commitizen 中，cz-conventional-changelog 是一个适配器的概念，如果需要自定义规范，需要采用其他适配器，比如：<a href="https://github.com/leoforfree/cz-customizable" target="_blank" rel="noopener noreferrer">cz-customizable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，具体配置可参考其说明，增加自定义的规范配置。</p> <p>整体上来说 commitizen 简化了提交步骤，帮助我们生成规范提交信息，但是还是不太好用，而且选项式的交互要一个个选，不支持联想，自定义配置上也比较繁琐。不推荐使用，下面重点介绍下<a href="https://cz-git.qbb.sh/zh/" target="_blank" rel="noopener noreferrer">cz-git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，</p> <h3 id="cz-git-和-czg"><a href="#cz-git-和-czg" class="header-anchor">#</a> cz-git 和 czg</h3> <h4 id="cg-git"><a href="#cg-git" class="header-anchor">#</a> cg-git</h4> <p><a href="https://cz-git.qbb.sh/zh/" target="_blank" rel="noopener noreferrer">cg-git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一款轻量级，交互友好，<strong>高度自定义，支持联想</strong>，遵循标准 Angular commit 规范的 Commitizen Adapter。</p> <p>注意：</p> <ol><li><strong>cg-git 是 Commitizen 的适配器，其本身依赖 Commitizen</strong></li> <li>cg-git 的优势是支持联想、规范配置简单灵活</li></ol> <p><img src="/assets/img/cz-git.df1057c1.gif" alt=""></p> <p>可以先读下作者的这两篇文章：</p> <ul><li><a href="https://cz-git.qbb.sh/zh/guide/why" target="_blank" rel="noopener noreferrer">为什么选择 cz-git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.qbb.sh/posts/2022-12-26-cz-git-czg-journey-zh" target="_blank" rel="noopener noreferrer">cz-git 和 czg 的开发之旅<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>具体配置方式见：<a href="https://cz-git.qbb.sh/zh/guide/" target="_blank" rel="noopener noreferrer">快速开始<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>// 1. 全局或项目添加 commitizen
npm install -g commitizen
or
npm install -D commitizen

// 2. 安装 cz-git
npm install -D cz-git

// 3. 修改 package.json 添加 config 指定使用的适配器
{
  &quot;scripts&quot;: {

  },
  &quot;config&quot;: {
    &quot;commitizen&quot;: {
      &quot;path&quot;: &quot;node_modules/cz-git&quot;
    }
  }
}

// 4. 规范配置（下面介绍）
</code></pre></div><p>可以使用 cg-git 自带的<a href="https://cz-git.qbb.sh/zh/config/#javascript-%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">默认配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，也可以与 commitlint 结合使用，建立 commlint 支持的配置文件（例如**.commitlintrc.js**），在文件内直接自定义，文件配置在<a href="https://cz-git.qbb.sh/zh/config/" target="_blank" rel="noopener noreferrer">配置模板<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中介绍的比较清楚。即</p> <ol><li><p>cg-git 自带了<a href="https://cz-git.qbb.sh/zh/config/#javascript-%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">默认配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（在 Javascript 模板中），另外还有：<a href="https://cz-git.qbb.sh/zh/config/#%E4%B8%AD%E8%8B%B1%E6%96%87%E5%AF%B9%E7%85%A7%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">中英文对照模板<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://cz-git.qbb.sh/zh/config/#%E7%BA%AF%E6%B1%89%E5%8C%96%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">纯汉化模板（不推荐）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://cz-git.qbb.sh/zh/config/#emoji-%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">Emoji 模板<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://cz-git.qbb.sh/zh/config/#json-%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">JSON 模板<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .commitlintrc.js</span>
<span class="token comment">/** @type {import('cz-git').UserConfig} */</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// @see: https://commitlint.js.org/#/reference-rules</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">prompt</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">fd</span><span class="token operator">:</span> <span class="token string">&quot;docs: fix typos&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;Select the type of change that you're committing:&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">&quot;Denote the SCOPE of this change (optional):&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">customScope</span><span class="token operator">:</span> <span class="token string">&quot;Denote the SCOPE of this change:&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">subject</span><span class="token operator">:</span>
        <span class="token string">&quot;Write a SHORT, IMPERATIVE tense description of the change:\n&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">'Provide a LONGER description of the change (optional). Use &quot;|&quot; to break new line:\n'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">breaking</span><span class="token operator">:</span>
        <span class="token string">'List any BREAKING CHANGES (optional). Use &quot;|&quot; to break new line:\n'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">footerPrefixesSelect</span><span class="token operator">:</span>
        <span class="token string">&quot;Select the ISSUES type of changeList by this change (optional):&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">customFooterPrefix</span><span class="token operator">:</span> <span class="token string">&quot;Input ISSUES prefix:&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token string">&quot;List any ISSUES by this change. E.g.: #31, #34:\n&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">generatingByAI</span><span class="token operator">:</span> <span class="token string">&quot;Generating your AI commit subject...&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">generatedSelectByAI</span><span class="token operator">:</span> <span class="token string">&quot;Select suitable subject by AI generated:&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">confirmCommit</span><span class="token operator">:</span>
        <span class="token string">&quot;Are you sure you want to proceed with the commit above?&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">types</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;feat&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;feat:     A new feature&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:sparkles:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;fix&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;fix:      A bug fix&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:bug:&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;docs&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;docs:     Documentation only changes&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:memo:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;style:    Changes that do not affect the meaning of the code&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:lipstick:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;refactor&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;refactor: A code change that neither fixes a bug nor adds a feature&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:recycle:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;perf&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;perf:     A code change that improves performance&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:zap:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;test:     Adding missing tests or correcting existing tests&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:white_check_mark:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;build:    Changes that affect the build system or external dependencies&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:package:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;ci&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ci:       Changes to our CI configuration files and scripts&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:ferris_wheel:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;chore&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;chore:    Other changes that don't modify src or test files&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:hammer:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;revert&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;revert:   Reverts a previous commit&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emoji</span><span class="token operator">:</span> <span class="token string">&quot;:rewind:&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">useEmoji</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">emojiAlign</span><span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">useAI</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">aiNumber</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">themeColorCode</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scopes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowCustomScopes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowEmptyScopes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customScopesAlign</span><span class="token operator">:</span> <span class="token string">&quot;bottom&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customScopesAlias</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">emptyScopesAlias</span><span class="token operator">:</span> <span class="token string">&quot;empty&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">upperCaseSubject</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">markBreakingChangeMode</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowBreakingChanges</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;feat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fix&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">breaklineNumber</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">breaklineChar</span><span class="token operator">:</span> <span class="token string">&quot;|&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">skipQuestions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">issuePrefixes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;closed&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;closed:   ISSUES has been processed&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customIssuePrefixAlign</span><span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">emptyIssuePrefixAlias</span><span class="token operator">:</span> <span class="token string">&quot;skip&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customIssuePrefixAlias</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowCustomIssuePrefix</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowEmptyIssuePrefix</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">confirmColorize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxHeaderLength</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxSubjectLength</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minSubjectLength</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scopeOverrides</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultBody</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultIssues</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultScope</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultSubject</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>可与 commitlint 结合起来，直接在 commitlint 支持的配置文件或 cz.config.js 、cz.config.cjs 文件修改，推荐与 commintlint 配置结合</p> <div class="language- extra-class"><pre class="language-text"><code>// 示例
// .commitlintrc.js 中使用 @commitlint/config-conventional（需先添加 @commitlint/config-conventional ）
module.exports = {
  extends: ['@commitlint/config-conventional']
}

// 自定义配置，只支持 feat、fix
module.exports = {
  prompt: {
    types: [
      { value: 'feat', name: 'feat:     A new feature', emoji: ':sparkles:' },
      { value: 'fix', name: 'fix:      A bug fix', emoji: ':bug:' }
    ]
  }
}
</code></pre></div></li></ol> <p>其他配置的详细说明可参考其说明。</p> <p><strong>整体来说，cg-git 是一个很好的 commitizen 适配器，联想功能和高度灵活的配置使其非常好用。</strong></p> <h4 id="czg"><a href="#czg" class="header-anchor">#</a> czg</h4> <p>czg = commitizen + cz-git，更轻量。</p> <p><strong>注意：czg 是 commitize 的替代品，不是适配器，czg 不依赖 commitize。</strong></p> <blockquote><p>cz-git 是 <strong>commitizen 的适配器</strong>。而 czg 具有 cz-git 相同的行为和配置加载。如果你的团队中有人使用 Commitizen CLI，两者可以混用，毕竟两者都非常小并且无需下载其他依赖项。</p> <ul><li>如果你使用 <code>cz</code> 或 <code>git cz</code> 命令将会启动 <code>commitizen</code> CLI + <code>cz-git</code> 适配器</li> <li>如果你使用 <code>czg</code> 或 <code>git czg</code> 命令只会启动 <code>czg</code> CLI</li></ul></blockquote> <p>相比于 cz-git 依赖 commitizen，czg 会更轻量。</p> <div class="language- extra-class"><pre class="language-text"><code>//1. 全局安装，全局安装后直接可使用 czg命令
npm install -g czg

// or 项目安装
npm install -D czg

// 在 package.json 中添加启动脚本 运行命令进行尝试 npm czg
{
  &quot;scripts&quot;: {
    &quot;czg&quot;: &quot;czg&quot;
  }
}

// 规范配置部分与cg-git相同

// 提交时使用 czg 或 npm czg 即可打开czg进行交互式提交
</code></pre></div><p><strong>RECOMMEND：</strong></p> <ol><li><strong>cgz 更轻量，推荐直接使用 cgz</strong></li> <li>如果自定配置较多的提交规范，建议工程集成 cgz；如果基本与默认配置相同，建议本地全局安装 cgz</li></ol> <h3 id="基于czg的最佳工程实践"><a href="#基于czg的最佳工程实践" class="header-anchor">#</a> 基于czg的最佳工程实践</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. Add commitlint</span>
pnpm add <span class="token operator">-</span><span class="token constant">D</span> @commitlint<span class="token operator">/</span>cli

<span class="token comment">// 2. Add husky</span>
pnpm dlx husky<span class="token operator">-</span>init <span class="token operator">&amp;&amp;</span> pnpm install
pnpx husky add <span class="token punctuation">.</span>husky<span class="token operator">/</span>commit<span class="token operator">-</span>msg <span class="token string">'npx --no -- commitlint --edit &quot;$1&quot;'</span>

<span class="token comment">// 3. Add czg</span>
pnpm add <span class="token operator">-</span><span class="token constant">D</span> czg
<span class="token comment">// package.json配置czg脚本</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;cz&quot;</span><span class="token operator">:</span> <span class="token string">&quot;czg&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//4. 工程增加 .commitlintrc.js 文件，为commitlint和czg配置文件，文件内容如下（采用 cz-git 中英文配置文件）</span>
<span class="token comment">// .commitlintrc.js</span>
<span class="token comment">/** @type {import('cz-git').UserConfig} */</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'body-leading-blank'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'footer-leading-blank'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'header-max-length'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'subject-empty'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'never'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'type-empty'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'never'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'subject-case'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'type-enum'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token string">'always'</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token string">'fix'</span><span class="token punctuation">,</span> <span class="token string">'docs'</span><span class="token punctuation">,</span> <span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token string">'refactor'</span><span class="token punctuation">,</span> <span class="token string">'perf'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token string">'ci'</span><span class="token punctuation">,</span> <span class="token string">'revert'</span><span class="token punctuation">,</span> <span class="token string">'chore'</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">prompt</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">fd</span><span class="token operator">:</span> <span class="token string">'docs: fix typos'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'选择你要提交的类型 :'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">'选择一个提交范围（可选）:'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">customScope</span><span class="token operator">:</span> <span class="token string">'请输入自定义的提交范围 :'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">'填写简短精炼的变更描述 :\n'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">'填写更加详细的变更描述（可选）。使用 &quot;|&quot; 换行 :\n'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">breaking</span><span class="token operator">:</span> <span class="token string">'列举非兼容性重大的变更（可选）。使用 &quot;|&quot; 换行 :\n'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">footerPrefixesSelect</span><span class="token operator">:</span> <span class="token string">'选择关联issue前缀（可选）:'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">customFooterPrefix</span><span class="token operator">:</span> <span class="token string">'输入自定义issue前缀 :'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token string">'列举关联issue (可选) 例如: #31, #I3244 :\n'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">confirmCommit</span><span class="token operator">:</span> <span class="token string">'是否提交或修改commit ?'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">types</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'feat:     新增功能 | A new feature'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'fix'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'fix:      修复缺陷 | A bug fix'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'docs'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'docs:     文档更新 | Documentation only changes'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'style:    代码格式 | Changes that do not affect the meaning of the code'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'refactor'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'refactor: 代码重构 | A code change that neither fixes a bug nor adds a feature'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'perf'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'perf:     性能提升 | A code change that improves performance'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test:     测试相关 | Adding missing tests or correcting existing tests'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'build:    构建相关 | Changes that affect the build system or external dependencies'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'ci'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ci:       持续集成 | Changes to our CI configuration files and scripts'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'revert'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'revert:   回退代码 | Revert to a commit'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'chore'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'chore:    其他修改 | Other changes that do not modify src or test files'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">useEmoji</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">emojiAlign</span><span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">useAI</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">aiNumber</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">themeColorCode</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scopes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowCustomScopes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowEmptyScopes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customScopesAlign</span><span class="token operator">:</span> <span class="token string">'bottom'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customScopesAlias</span><span class="token operator">:</span> <span class="token string">'custom'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">emptyScopesAlias</span><span class="token operator">:</span> <span class="token string">'empty'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">upperCaseSubject</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">markBreakingChangeMode</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowBreakingChanges</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token string">'fix'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">breaklineNumber</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">breaklineChar</span><span class="token operator">:</span> <span class="token string">'|'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">skipQuestions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">issuePrefixes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 如果使用 gitee 作为开发管理</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'link'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'link:     链接 ISSUES 进行中'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'closed'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'closed:   标记 ISSUES 已完成'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customIssuePrefixAlign</span><span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">emptyIssuePrefixAlias</span><span class="token operator">:</span> <span class="token string">'skip'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customIssuePrefixAlias</span><span class="token operator">:</span> <span class="token string">'custom'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowCustomIssuePrefix</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowEmptyIssuePrefix</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">confirmColorize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxHeaderLength</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxSubjectLength</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minSubjectLength</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scopeOverrides</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultBody</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultIssues</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultScope</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultSubject</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 5.提交时执行 pnpm cz即可</span>
git add <span class="token punctuation">.</span>
pnpm cz
</code></pre></div><p>资料：</p> <ul><li><a href="https://cz-git.qbb.sh/zh/config/#%E4%B8%AD%E8%8B%B1%E6%96%87%E5%AF%B9%E7%85%A7%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">cz-git 中英文对照模板<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cz-git.qbb.sh/zh/cli/" target="_blank" rel="noopener noreferrer">czg<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="changelog"><a href="#changelog" class="header-anchor">#</a> CHANGELOG</h2> <p>根据规范提交信息自动生成版本信息，相关工具：</p> <ul><li><a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">Standard Version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，使用较多，但是作者本身已经不维护了，作者推荐使用 release-please</li> <li><a href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli" target="_blank" rel="noopener noreferrer">conventional-changelog-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，Generate a changelog from git metadata</li> <li><a href="https://github.com/googleapis/release-please" target="_blank" rel="noopener noreferrer">release-please<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，与 Github 结合的比较好</li></ul> <p><strong>根据 npmtrends 数据，使用量 standard-version &gt; conventional-changelog-cli &gt; release-please</strong></p> <p>以 standarr-version 为例：</p> <div class="language- extra-class"><pre class="language-text"><code>// 1. 全局或项目安装 standard-version
npm install -g standard-version
or
pnpm add -D standard-version

// 2. 项目安装则需要配置packagejson
{
  &quot;scripts&quot;: {
    &quot;release&quot;: &quot;standard-version&quot;
  }
}

// 3. 则可使用 pnpm release 命令，会在项目中自动生成 CHANGELOG.md 文件
</code></pre></div><p>CHANGELOG.md 文件示例：</p> <p><img src="/assets/img/changelog.b72efffc.png" alt=""></p> <p>即<code>pnpm release</code> 命令，会完成四件事：</p> <ol><li>提取 feat、feat!、fix、BREAKCHANGE 提交信息生成版本记录和版本变更，生成 CHANGELOG.md 文件</li> <li>修改 package.json 文件版本，并</li> <li>自动生成一个<code>chore(release): 0.1.0</code>的提交（提交内容包含 CHANGE.md 文件和 package.josn 文件）</li> <li>添加 git 对应版本 TAG</li></ol> <h2 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h2> <ul><li><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">约定式提交规范 Conventional Commits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular.js%2Fblob%2Fmaster%2FDEVELOPERS.md%23-git-commit-guidelines" target="_blank" rel="noopener noreferrer">Angular 团队规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vuejs/core/blob/main/.github/commit-convention.md" target="_blank" rel="noopener noreferrer">Vue Git Commit Message Convention<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/toplenboren/simple-git-hooks" target="_blank" rel="noopener noreferrer">simple-git-hooks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">Commitizen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cz-git.qbb.sh/zh/" target="_blank" rel="noopener noreferrer">cg-git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">Standard Version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/9/2023, 6:37:48 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/Web/Vue/VueEcosystem/VueEcosystem.html" class="prev">
          Vue生态库
        </a></span> <span class="next"><a href="/Web/Base/YAML.html">
          YAML语法规则
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-3b069fde data-v-349e681a><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#背景" class="sidebar-link reco-side-背景" data-v-3b069fde>背景</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#为什么使用约定式提交" class="sidebar-link reco-side-为什么使用约定式提交" data-v-3b069fde>为什么使用约定式提交</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#整体认知" class="sidebar-link reco-side-整体认知" data-v-3b069fde>整体认知</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#规范文档" class="sidebar-link reco-side-规范文档" data-v-3b069fde>规范文档</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#规范配置文件" class="sidebar-link reco-side-规范配置文件" data-v-3b069fde>规范配置文件</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#commitlint" class="sidebar-link reco-side-commitlint" data-v-3b069fde>Commitlint</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#git-hooks" class="sidebar-link reco-side-git-hooks" data-v-3b069fde>Git hooks</a></li><li class="level-3" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#husky" class="sidebar-link reco-side-husky" data-v-3b069fde>husky</a></li><li class="level-3" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#simple-git-hooks" class="sidebar-link reco-side-simple-git-hooks" data-v-3b069fde>simple-git-hooks</a></li><li class="level-3" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#关于-commitlint-提交命令" class="sidebar-link reco-side-关于-commitlint-提交命令" data-v-3b069fde>关于 commitlint 提交命令</a></li><li class="level-3" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#vue3-工程中规范提交检查的实现" class="sidebar-link reco-side-vue3-工程中规范提交检查的实现" data-v-3b069fde>vue3 工程中规范提交检查的实现</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#工程落地完整实践" class="sidebar-link reco-side-工程落地完整实践" data-v-3b069fde>工程落地完整实践</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#交互提示工具" class="sidebar-link reco-side-交互提示工具" data-v-3b069fde>交互提示工具</a></li><li class="level-3" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#commitizen" class="sidebar-link reco-side-commitizen" data-v-3b069fde>Commitizen</a></li><li class="level-3" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#cz-git-和-czg" class="sidebar-link reco-side-cz-git-和-czg" data-v-3b069fde>cz-git 和 czg</a></li><li class="level-3" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#基于czg的最佳工程实践" class="sidebar-link reco-side-基于czg的最佳工程实践" data-v-3b069fde>基于czg的最佳工程实践</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#changelog" class="sidebar-link reco-side-changelog" data-v-3b069fde>CHANGELOG</a></li><li class="level-2" data-v-3b069fde><a href="/Web/Base/ConventionalCommits/ConventionalCommits.html#附录" class="sidebar-link reco-side-附录" data-v-3b069fde>附录</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a01419c data-v-2a01419c><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a01419c><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a01419c></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a01419c></path></svg></div></div></div>
    <script src="/assets/js/app.3efcfa1f.js" defer></script><script src="/assets/js/3.d41f5393.js" defer></script><script src="/assets/js/1.0d0e82e9.js" defer></script><script src="/assets/js/13.bfe6e49a.js" defer></script>
  </body>
</html>
